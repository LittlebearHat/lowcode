(function(){"use strict";var e={3346:function(e,t,o){var l=o(9242),n=o(3396),a=o(4870),r=(0,n.aZ)({props:{block:{type:Object},component:{type:Object}},setup(e){const{width:t,height:o}=e.component.resize||{};let l={};const a=t=>{let{clientX:o,clientY:n}=t,{startX:a,startY:r,startWidth:u,startHeight:i,startLeft:s,startTop:c,direction:d}=l;"center"==d.horizontal&&(o=a),"center"==d.vertical&&(n=r);let p=o-a,m=n-r;"start"==d.vertical&&(m=-m,e.block.top=c-m),"start"==d.horizontal&&(p=-p,e.block.left=s-p);const f=u+p,v=i+m;e.block.width=f,e.block.height=v,e.block.hasResize=!0},r=()=>{document.body.removeEventListener("mousemove",a),document.body.removeEventListener("mouseup",r)},u=(t,o)=>{t.stopPropagation(),t.preventDefault(),console.log("事件触发"),l={startX:t.clientX,startY:t.clientY,startWidth:e.block.width,startHeight:e.block.height,startLeft:e.block.left,startTop:e.block.top,direction:o},document.body.addEventListener("mousemove",a),document.body.addEventListener("mouseup",r)};return()=>(0,n.Wm)("div",null,[t&&(0,n.Wm)("div",null,[(0,n.Wm)("div",{class:"block-resize block-resize-left",onMousedown:e=>u(e,{horizontal:"start",vertical:"center"})},null),(0,n.Wm)("div",{class:"block-resize block-resize-right",onMousedown:e=>u(e,{horizontal:"end",vertical:"center"})},null)]),o&&(0,n.Wm)("div",null,[(0,n.Wm)("div",{class:"block-resize block-resize-top",onMousedown:e=>u(e,{horizontal:"center",vertical:"start"})},null),(0,n.Wm)("div",{class:"block-resize block-resize-bottom",onMousedown:e=>u(e,{horizontal:"center",vertical:"end"})},null)]),t&&o&&(0,n.Wm)("div",null,[(0,n.Wm)("div",{class:"block-resize block-resize-top-left",onMousedown:e=>u(e,{horizontal:"start",vertical:"start"})},null),(0,n.Wm)("div",{class:"block-resize block-resize-top-right",onMousedown:e=>u(e,{horizontal:"end",vertical:"start"})},null),(0,n.Wm)("div",{class:"block-resize block-resize-bottom-left",onMousedown:e=>u(e,{horizontal:"start",vertical:"end"})},null),(0,n.Wm)("div",{class:"block-resize block-resize-bottom-right",onMousedown:e=>u(e,{horizontal:"end",vertical:"end"})},null)])])}}),u=(0,n.aZ)({props:{block:{type:Object},formData:{type:Object}},setup(e){const t=(0,n.Fl)((()=>({top:`${e.block.top}px`,left:`${e.block.left}px`,zIndex:`${e.block.zIndex}`}))),o=(0,n.f3)("config"),l=(0,a.iH)(null);return(0,n.bv)((()=>{let{offsetWidth:t,offsetHeight:o}=l.value;e.block.alignCenter&&(e.block.left=e.block.left-t/2,e.block.top=e.block.top-o/2,e.block.alignCenter=!1),e.block.width=t,e.block.height=o})),()=>{const a=o.componentMap[e.block.key],u=a.render({size:e.block.hasResize?{width:e.block.width,height:e.block.height}:{},props:e.block.props,model:Object.keys(a.model||{}).reduce(((t,o)=>{console.log("model",o);let l=e.block.model[o];return console.log(l),t[o]={modelValue:e.formData[l],"onUpdate:modelValue":t=>e.formData[l]=t},t}),{})}),{width:i,height:s}=a.resize||{};return(0,n.Wm)("div",{class:"editor-block",style:t.value,ref:l},[u,e.block.focus&&(i||s)&&(0,n.Wm)(r,{block:e.block,component:a},null)])}}}),i=o(1373);const s=(0,i.Z)();function c(e,t){let o=null;const l=e=>{e.dataTransfer.dropEffect="move"},n=e=>{e.preventDefault()},a=e=>{e.dataTransfer.dropEffect="none"},r=e=>{let l=t.value.blocks;t.value={...t.value,blocks:[...l,{top:e.offsetY,left:e.offsetX,zIndex:1,key:o.key,alignCenter:!0,props:{},model:{}}]},console.log("data.value",t.value),o=null},u=(t,u)=>{e.value.addEventListener("dragenter",l),e.value.addEventListener("dragover",n),e.value.addEventListener("dragleave",a),e.value.addEventListener("drop",r),o=u,s.emit("start")},i=t=>{e.value.removeEventListener("dragenter",l),e.value.removeEventListener("dragover",n),e.value.removeEventListener("dragleave",a),e.value.removeEventListener("drop",r),s.emit("end")};return{dragstart:u,dragend:i}}o(7658);function d(e,t,o){const l=(0,a.iH)(-1),r=(0,n.Fl)((()=>e.value.blocks[l.value])),u=(0,n.Fl)((()=>{let t=[],o=[];return e.value.blocks.forEach((e=>{(e.focus?t:o).push(e)})),{focus:t,unfocus:o}})),i=(n,a,r)=>{t.value||(n.preventDefault(),n.stopPropagation(),n.shiftKey?(console.log(e),u.value.focus.length<=1?a.focus=!0:a.focus=!a.focus):a.focus||(e.value.blocks.forEach((e=>e.focus=!1)),a.focus=!0),l.value=r,o(n))},s=()=>{t.value||(e.value.blocks.forEach((e=>e.focus=!1)),l.value=-1)};return{blockMousedown:i,containerMousedown:s,focusData:u,lastSelectBlock:r}}function p(e,t,o){let l={startX:0,startY:0,dragging:!1},n=(0,a.qj)({x:null,y:null});const r=n=>{const{width:a,height:r}=t.value;l={startX:n.clientX,startY:n.clientY,startLeft:t.value.left,startTop:t.value.top,dragging:!1,startPos:e.value.focus.map((({top:e,left:t})=>({top:e,left:t}))),lines:(()=>{const{unfocus:t}=e.value;let l={x:[],y:[]};return[...t,{top:0,left:0,width:o.value.container.width,height:o.value.container.height}].forEach((e=>{const{top:t,left:o,width:n,height:u}=e;l.y.push({showTop:t,top:t}),l.y.push({showTop:t,top:t-r}),l.y.push({showTop:t+u/2,top:t-r/2+u/2}),l.y.push({showTop:t+u,top:t+u}),l.y.push({showTop:t+u,top:t+u-r}),l.x.push({showLeft:o,left:o}),l.x.push({showLeft:o+n,left:o+n}),l.x.push({showLeft:o+n/2,left:o+n/2-a/2}),l.x.push({showLeft:o+n,left:o+n-a}),l.x.push({showLeft:o,left:o-a})})),l})()},document.addEventListener("mousemove",u),document.addEventListener("mouseup",i)},u=t=>{let{clientX:o,clientY:a}=t;l.dragging||(l.dragging=!0,s.emit("start"));let r=o-l.startX+l.startLeft,u=a-l.startY+l.startTop,i=null,c=null;for(let e=0;e<l.lines.y.length;e++){const{top:t,showTop:o}=l.lines.y[e];if(Math.abs(t-u)<5){i=o,a=l.startY-l.startTop+t;break}}for(let e=0;e<l.lines.x.length;e++){const{left:t,showLeft:n}=l.lines.x[e];if(Math.abs(t-r)<5){c=n,o=l.startX-l.startLeft+t;break}}n.x=c,n.y=i;let d=o-l.startX,p=a-l.startY;e.value.focus.forEach(((e,t)=>{e.top=l.startPos[t].top+p,e.left=l.startPos[t].left+d}))},i=e=>{n.x=null,n.y=null,document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",i),l.dragging&&s.emit("end")};return{mousedown:r,markLine:n}}var m=o(2177),f=o.n(m);function v(e,t){const o={current:-1,queue:[],commands:{},commandArray:[],destoryArray:[]},l=e=>{o.commandArray.push(e),o.commands[e.name]=(...t)=>{const{redo:l,undo:n}=e.execute(...t);if(l(),!e.pushQueue)return;let{queue:a,current:r}=o;a.length>0&&(a=a.slice(0,r+1),o.queue=a),a.push({redo:l,undo:n}),o.current=r+1}};l({name:"redo",keyboard:"ctrl+y",init(){},execute(){return{redo(){let e=o.queue[o.current+1];e&&(e.redo&&e.redo(),o.current++)}}}}),l({name:"undo",keyboard:"ctrl+z",execute(){return{redo(){if(-1==o.current)return;let e=o.queue[o.current];e&&(e.undo&&e.undo(),o.current--)}}}}),l({name:"drag",pushQueue:!0,init(){this.before=null;const t=()=>this.before=f()(e.value.blocks),l=()=>o.commands.drag();return s.on("start",t),s.on("end",l),()=>{s.off("start",t),s.off("end",l)}},execute(){let t=this.before,o=e.value.blocks;return{redo(){e.value={...e.value,blocks:o}},undo(){e.value={...e.value,blocks:t}}}}}),l({name:"updateContainer",pushQueue:!0,execute(t){let o={before:e.value,after:t};return{redo:()=>{e.value=o.after},undo:()=>{e.value=o.before}}}}),l({name:"placeTop",pushQueue:!0,execute(){let o=f()(e.value.blocks),l=(()=>{let{focus:o,unfocus:l}=t.value,n=l.reduce(((e,t)=>Math.max(e,t.zIndex)),-1/0);return o.forEach((e=>e.zIndex=n+1)),e.value.blocks})();return{undo:()=>{e.value={...e.value,blocks:o}},redo:()=>{e.value={...e.value,blocks:l}}}}}),l({name:"placeBottom",pushQueue:!0,execute(){let o=f()(e.value.blocks),l=(()=>{let{focus:o,unfocus:l}=t.value,n=l.reduce(((e,t)=>Math.min(e,t.zIndex)),1/0)-1;return n<0&&(n=0,l.forEach((e=>e.zIndex+=1))),o.forEach((e=>e.zIndex=n)),e.value.blocks})();return{undo:()=>{e.value={...e.value,blocks:o}},redo:()=>{e.value={...e.value,blocks:l}}}}}),l({name:"delete",pushQueue:!0,execute(){let o={before:e.value.blocks,after:t.value.unfocus};return{undo:()=>{e.value={...e.value,blocks:o.before}},redo:()=>{e.value={...e.value,blocks:o.after}}}}}),l({name:"updateBlock",pushQueue:!0,execute(t,o){let l={before:e.value.blocks,after:(()=>{let l=[...e.value.blocks];const n=e.value.blocks.indexOf(o);return n>-1&&l.splice(n,1,t),l})()};return{redo:()=>{e.value={...e.value,blocks:l.after}},undo:()=>{e.value={...e.value,blocks:l.before}}}}});const a=(()=>{const e={90:"z",89:"y"},t=t=>{console.log("键盘",t);const{ctrlKey:l,keyCode:n}=t;let a=[];l&&a.push("ctrl"),a.push(e[n]),a=a.join("+"),o.commandArray.forEach((({keyboard:e,name:l})=>{e&&e==a&&(o.commands[l](),t.preventDefault())}))},l=()=>(window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)});return l})();return(()=>{o.destoryArray.push(a()),o.commandArray.forEach((e=>e.init&&o.destoryArray.push(e.init())))})(),(0,n.Ah)((()=>{o.destoryArray.forEach((e=>e&&e()))})),o}var h=o(2472),b=o(9866),k=o(3614);const g=(0,n.aZ)({props:{option:{type:Object}},setup(e,t){const o=(0,a.qj)({option:e.option,isShow:!1});t.expose({showDialog(e){o.option=e,o.isShow=!0}});const l=()=>{o.isShow=!1},r=()=>{o.isShow=!1,o.option.confirm&&o.option.confirm(o.option.content)};return()=>(0,n.Wm)(h.d0,{modelValue:o.isShow,"onUpdate:modelValue":e=>o.isShow=e,title:o.option.title},{default:()=>(0,n.Wm)(b.EZ,{type:"textarea",modelValue:o.option.content,"onUpdate:modelValue":e=>o.option.content=e,rows:10},null),footer:()=>o.option.footer&&(0,n.Wm)("div",null,[(0,n.Wm)(k.mi,{onClick:l},{default:()=>[(0,n.Uk)("取消")]}),(0,n.Wm)(k.mi,{onClick:r},{default:()=>[(0,n.Uk)("确认")]})])})}});let y;function w(e){if(!y){let t=document.createElement("div");y=(0,n.Wm)(g,{option:e}),console.log(y),document.body.appendChild(((0,l.sY)(y,t),t))}let{showDialog:t}=y.component.exposed;t(e)}const W=(0,n.aZ)({props:{label:{type:String},icon:{type:String}},setup(e){let t=(0,n.f3)("hide"),{label:o,icon:l}=e;return()=>(0,n.Wm)("div",{class:"dropdown-item",onClick:t},[(0,n.Wm)("span",null,[o])])}}),x=(0,n.aZ)({props:{option:{type:Object}},setup(e,t){const o=(0,a.qj)({option:e.option,isShow:!1,top:0,left:0});t.expose({showDropdown(e){o.option=e,o.isShow=!0;let{top:t,left:l,height:n}=e.el.getBoundingClientRect();o.top=t+n,o.left=l}}),(0,n.JJ)("hide",(()=>o.isShow=!1));const l=(0,n.Fl)((()=>["dropdown",{"dropdown-isShow":o.isShow}])),r=(0,n.Fl)((()=>({top:o.top+"px",left:o.left+"px"})));let u=(0,a.iH)(null);const i=e=>{u.value.contains(e.target)||(o.isShow=!1)};return(0,n.bv)((()=>{document.body.addEventListener("mousedown",i,!0)})),(0,n.Jd)((()=>{document.body.removeEventListener("mousedown",i)})),()=>(0,n.Wm)("div",{class:l.value,style:r.value,ref:u},[o.option.content()])}});let z;function D(e){if(!z){let t=document.createElement("div");z=(0,n.Wm)(x,{option:e}),document.body.appendChild(((0,l.sY)(z,t),t))}let{showDropdown:t}=z.component.exposed;t(e)}var E=o(363),C=o(9971),V=o(2384);const L=(0,n.aZ)({props:{option:{type:Object}},setup(e,t){const o=(0,a.qj)({option:e.option,isShow:!1,editData:[]});let l={show(e){o.option=e,o.isShow=!0,o.editData=f()(e.data)}};const r=()=>{o.editData.push({})},u=()=>{o.isShow=!1},i=()=>{o.option.onConfirm(o.editData),u()};return t.expose(l),()=>(0,n.Wm)(h.d0,{modelValue:o.isShow,"onUpdate:modelValue":e=>o.isShow=e,title:o.option.config.label},{default:()=>(0,n.Wm)("div",null,[(0,n.Wm)("div",null,[(0,n.Wm)(k.mi,{onClick:r},{default:()=>[(0,n.Uk)("添加")]}),(0,n.Wm)(k.mi,null,{default:()=>[(0,n.Uk)("重置")]})]),(0,n.Wm)(V.eI,{data:o.editData},{default:()=>[o.option.config.table.options.map(((e,t)=>(0,n.Wm)(V.$Y,{label:e.label},{default:({row:t})=>(0,n.Wm)(b.EZ,{modelValue:t[e.field],"onUpdate:modelValue":o=>t[e.field]=o},null)}))),(0,n.Wm)(V.$Y,{label:"操作"},{default:()=>[(0,n.Wm)(k.mi,{type:"danger"},{default:()=>[(0,n.Uk)("删除")]})]})]})]),footer:()=>(0,n.Wm)(n.HY,null,[(0,n.Wm)(k.mi,{onClick:u},{default:()=>[(0,n.Uk)("取消")]}),(0,n.Wm)(k.mi,{onClick:i},{default:()=>[(0,n.Uk)("确定")]})])})}});let O;const j=e=>{if(!O){const t=document.createElement("div");O=(0,n.Wm)(L,{option:e});(0,l.sY)(O,t);document.body.appendChild(t)}let{show:t}=O.component.exposed;t(e)};var U=(0,n.aZ)({props:{propConfig:{type:Object},modelValue:{type:Array}},emits:["update:modelValue"],setup(e,t){const o=(0,n.Fl)({get(){return e.modelValue||[]},set(e){t.emit("update:modelValue",f()(e))}}),l=()=>{j({config:e.propConfig,data:o.value,onConfirm(e){o.value=e}})};return()=>(0,n.Wm)("div",null,[(!o.value||0==o.value.length)&&(0,n.Wm)(k.mi,{onClick:l},{default:()=>[(0,n.Uk)("新增选项")]}),(o.value||[]).map((t=>(0,n.Wm)(C.Ks,{onClick:l},{default:()=>[t[e.propConfig.table.key]]})))])}}),S=o(8131),M=o(5097),H=o(1429),T=o(2354);function Y(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,n.lA)(e)}var Z=(0,n.aZ)({props:{block:{type:Object},data:{type:Object},updateContainer:{type:Function},updateBlock:{type:Function}},setup(e,t){const o=(0,n.f3)("config"),l=(0,a.qj)({editData:{}}),r=()=>{e.block?l.editData=f()(e.block):l.editData=f()(e.data.container)},u=()=>{e.block?e.updateBlock(l.editData,e.block):e.updateContainer({...e.data,container:l.editData})};return(0,n.YP)((()=>e.block),r,{immediate:!0}),()=>{let t=[];if(e.block){let a=o.componentMap[e.block.key];a&&a.props&&t.push(Object.entries(a.props).map((([e,t])=>{let o;return(0,n.Wm)(S.nH,{label:t.label},Y(o={input:()=>(0,n.Wm)(b.EZ,{modelValue:l.editData.props[e],"onUpdate:modelValue":t=>l.editData.props[e]=t},null),color:()=>(0,n.Wm)(H.$,{modelValue:l.editData.props[e],"onUpdate:modelValue":t=>l.editData.props[e]=t},null),select:()=>{let o;return(0,n.Wm)(T.km,{modelValue:l.editData.props[e],"onUpdate:modelValue":t=>l.editData.props[e]=t},Y(o=t.options.map((e=>(0,n.Wm)(T.BT,{label:e.label,value:e.value},null))))?o:{default:()=>[o]})},table:()=>(0,n.Wm)(U,{propConfig:t,modelValue:l.editData.props[e],"onUpdate:modelValue":[t=>l.editData.props[e]=t,e=>{l.editData}]},null)}[t.type]())?o:{default:()=>[o]})}))),a&&a.model&&t.push(Object.entries(a.model).map((([e,t])=>(0,n.Wm)(S.nH,{label:t},{default:()=>[(0,n.Wm)(b.EZ,{modelValue:l.editData.model[e],"onUpdate:modelValue":t=>l.editData.model[e]=t},null)]}))))}else t.push((0,n.Wm)("div",null,[(0,n.Wm)(S.nH,{label:"容器宽度"},{default:()=>[(0,n.Wm)(M.d6,{modelValue:l.editData.width,"onUpdate:modelValue":e=>l.editData.width=e},null)]}),(0,n.Wm)(S.nH,{label:"容器高度"},{default:()=>[(0,n.Wm)(M.d6,{modelValue:l.editData.height,"onUpdate:modelValue":e=>l.editData.height=e},null)]})]));return(0,n.Wm)(S.ly,{labelPosition:"top"},{default:()=>[t,(0,n.Wm)(S.nH,null,{default:()=>[(0,n.Wm)(k.mi,{type:"primary",plain:!0,onClick:u},{default:()=>[(0,n.Uk)("应用")]}),(0,n.Wm)(k.mi,{plain:!0,onClick:r},{default:()=>[(0,n.Uk)("重置")]})]})]})}}}),A=(0,n.aZ)({props:{widthChange:{type:Function},showoutWidth:{type:Function},width:{type:Number},flag:{type:String}},setup(e){const t=(0,a.iH)(""),o=e=>{document.addEventListener("mousemove",l),t.value=e.screenX},l=o=>{e.widthChange(t.value-o.screenX,e.width,e.flag),t.value=o.screenX,document.addEventListener("mouseup",r)},r=()=>{t.value="",document.removeEventListener("mousemove",l)};return(0,n.Ah)((()=>{document.removeEventListener("mouseup",r)})),()=>(0,n.Wm)("div",{class:"x-handle",onMousedown:e=>{o(e)},onClick:"showout",unselectable:"on",onselectstart:"return false",style:"-moz-user-select: none; -webkit-user-select: none; -ms-user-select: none;"},null)}});function B(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,n.lA)(e)}var F=(0,n.aZ)({props:{modelValue:{type:Object},formData:{type:Object}},emits:["update:modelValue"],setup(e,t){const o=(0,a.iH)(!1),l=(0,a.iH)(!0),r=(0,n.Fl)({get(){return console.log("props值",e.modelValue),e.modelValue},set(e){t.emit("update:modelValue",f()(e)),console.log("newValue",e)}}),i=(0,n.Fl)((()=>({width:r.value.container.width+"px",height:r.value.container.height+"px"}))),s=(0,n.f3)("config"),m=(0,a.iH)(null),{dragstart:h,dragend:b}=c(m,r),{blockMousedown:g,focusData:y,containerMousedown:x,lastSelectBlock:z}=d(r,o,(e=>{C(e),console.log("e",e)})),{mousedown:C,markLine:V}=p(y,z,r),{commands:L}=v(r,y),O=[{label:"撤销",icon:"iconfont icon-xiangzuo",handler:()=>L.undo()},{label:"重做",icon:"iconfont icon-xiangyou1",handler:()=>L.redo()},{label:"源码",icon:"iconfont icon-suyuanmaguanli",handler:()=>{w({title:"源码",content:JSON.stringify(r.value)})}},{label:"导入",icon:"iconfont icon-xiazaidaoru",handler:()=>{w({title:"导入",content:"",footer:!0,confirm(e){console.log(e),r.value=JSON.parse(e)}})}},{label:"置顶",icon:"iconfont icon-zhiding",handler:()=>L.placeTop()},{label:"置底",icon:"iconfont icon-zhidi",handler:()=>L.placeBottom()},{label:"删除",icon:"iconfont icon-shanchu",handler:()=>L.delete()},{label:()=>o.value?"编辑":"锁定",icon:()=>o.value?"iconfont icon-bianji":"iconfont icon-suoding",handler:()=>{o.value=!o.value}},{label:"预览",icon:"iconfont icon-yulan",handler:()=>{l.value=!l.value,r.value.blocks.forEach((e=>e.focus=!1))}}],j=(e,t)=>{e.preventDefault(),D({el:e.target,content:()=>(0,n.Wm)(n.HY,null,[(0,n.Wm)(W,{label:"删除",onClick:()=>L.delete()},null),(0,n.Wm)(W,{label:"置顶",onClick:()=>L.placeTop()},null),(0,n.Wm)(W,{label:"置底",onClick:()=>L.placeBottom()},null),(0,n.Wm)(W,{label:"查看",onClick:()=>{w({title:"选中节点数据",content:JSON.stringify(t)})}},null),(0,n.Wm)(W,{label:"导入",onClick:()=>{w({title:"导入节点数据",content:"",footer:!0,confirm(e){e=JSON.parse(e),L.updateBlock(e,t)}})}},null)])})},U=(0,a.iH)(300),S=(0,a.iH)(300),M=(e,t,o)=>{"left"==o&&(t-=e,U.value=t),"right"==o&&(t+=e,S.value=t)},H=(e,t)=>{t=t>0?e:300};return()=>{let t;return l.value?(0,n.Wm)("div",{class:"box"},[(0,n.Wm)("div",{class:"header"},[(0,n.Wm)("div",{class:"head-img"},[(0,n.Wm)("img",{src:"https://www.z4a.net/images/2022/12/22/QQ20221007122031.png",alt:"QQ20221007122031.png",border:"0"},null)]),(0,n.Wm)("div",{class:"font"},[(0,n.Uk)("BEAR EDITOR")]),(0,n.Wm)("div",{class:"editor-button"},[O.map(((e,t)=>(0,n.Wm)("div",{class:"editor-top-button",title:"function"==typeof e.label?e.label():e.label,onClick:e.handler},[(0,n.Wm)("i",{class:"function"==typeof e.icon?e.icon():e.icon},null)])))])]),(0,n.Wm)("div",{class:"editor"},[(0,n.Wm)("div",{class:"editor-left",style:"width:"+U.value+"px"},[(0,n.Wm)(E.Ub,{"tab-position":"left",style:"height:100%"},{default:()=>[(0,n.Wm)(E.p8,{label:"组件"},B(t=s.componentList.map((e=>(0,n.Wm)("div",{class:"editor-left-item",onDragstart:t=>h(t,e),draggable:"true",onDragend:b},[(0,n.Wm)("span",null,[e.label]),(0,n.Wm)("div",null,[e.preview()])]))))?t:{default:()=>[t]}),(0,n.Wm)(E.p8,{label:"图表"},{default:()=>[(0,n.Uk)("敬请期待")]})]})]),(0,n.Wm)(A,{widthChange:M,showoutWidth:H,width:U.value,flag:"left"},null),(0,n.Wm)("div",{class:"editor-center",style:"width:calc(100% - "+U.value+"px - "+S.value+"px)"},[(0,n.Wm)("div",{class:"editor-container"},[(0,n.Wm)("div",{class:"editor-container-canvas"},[(0,n.Wm)("div",{class:"editor-container-canvas__content",style:i.value,ref:m,onMousedown:x},[r.value.blocks.map(((t,l)=>(0,n.Wm)(u,{class:[t.focus?"editor-block-focus":"",o.value?"editor-block-preview":""],block:t,onMousedown:e=>{g(e,t,l)},onContextmenu:e=>j(e,t),formData:e.formData},null))),null!=V.y&&(0,n.Wm)("div",{class:"line-y",style:{top:V.y+"px"}},null),null!=V.x&&(0,n.Wm)("div",{class:"line-x",style:{left:V.x+"px"}},null)])])])]),(0,n.Wm)(A,{widthChange:M,showoutWidth:H,width:S.value,flag:"right"},null),(0,n.Wm)("div",{class:"editor-right",style:"width:"+S.value+"px"},[(0,n.Wm)(Z,{block:z.value,data:r.value,updateContainer:L.updateContainer,updateBlock:L.updateBlock},null)])])]):(0,n.Wm)("div",{class:"content-preview"},[(0,n.Wm)("div",null,[(0,n.Wm)(k.mi,{onClick:()=>l.value=!l.value},{default:()=>[(0,n.Uk)("返回")]})]),(0,n.Wm)("div",{class:"editor-container-canvas__content",style:i.value},[r.value.blocks.map(((t,o)=>(0,n.Wm)(u,{block:t,class:"editor-block-preview",formData:e.formData},null)))])])}}}),X=JSON.parse('{"container":{"width":550,"height":550},"blocks":[]}'),q=(0,n.aZ)({props:{start:{type:Number},end:{type:Number}},emits:[],setup(e,t){const o=(0,n.Fl)({get(){return e.start},set(e){t.emit("update:start",e)}}),a=(0,n.Fl)({get(){return e.end},set(e){t.emit("update:end",e)}});return()=>(0,n.Wm)("div",{class:"range"},[(0,n.wy)((0,n.Wm)("input",{type:"text","onUpdate:modelValue":e=>o.value=e},null),[[l.nr,o.value]]),(0,n.Wm)("span",null,[(0,n.Uk)("~")]),(0,n.wy)((0,n.Wm)("input",{type:"text","onUpdate:modelValue":e=>a.value=e},null),[[l.nr,a.value]])])}});function Q(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,n.lA)(e)}function I(){const e=[],t={};return{componentList:e,componentMap:t,register:o=>{e.push(o),t[o.key]=o}}}let J=I();const P=e=>({type:"input",label:e}),N=e=>({type:"color",label:e}),_=(e,t)=>({type:"select",label:e,options:t}),$=(e,t)=>({type:"table",label:e,table:t});J.register({label:"文本",preview:()=>"预览文本",render:({props:e})=>(0,n.Wm)("span",{style:{color:e.color,fontSize:e.size}},[e.text||"渲染文本"]),key:"text",props:{text:P("文本内容"),color:N("字体颜色"),size:_("字体大小",[{label:"14px",value:"14px"},{label:"20px",value:"20px"},{label:"24px",value:"24px"}])}}),J.register({label:"按钮",resize:{width:!0,height:!0},preview:()=>(0,n.Wm)(k.mi,null,{default:()=>[(0,n.Uk)("预览按钮")]}),render:({props:e,size:t})=>(0,n.Wm)(k.mi,{type:e.type,size:e.size,style:{height:t.height+"px",width:t.width+"px"}},{default:()=>[e.text||"渲染按钮"]}),key:"button",props:{text:P("按钮内容"),type:_("按钮类型",[{label:"标准",value:"primary"},{label:"成功",value:"success"},{label:"文本",value:"text"},{label:"危险",value:"danger"},{label:"警告",value:"warning"}]),size:_("按钮尺寸",[{label:"默认",value:""},{label:"偏小",value:"small"},{label:"偏大",value:"large"}])}}),J.register({label:"输入栏",resize:{width:!0,height:!1},preview:()=>(0,n.Wm)(b.EZ,{placeholder:"预览输入栏"},{default:()=>[(0,n.Uk)("预览文本")]}),render:({props:e,size:t})=>(0,n.Wm)(b.EZ,{placeholder:"渲染输入栏",modelValue:e.text,"onUpdate:modelValue":t=>e.text=t,style:{width:t.width+"px"}},null),key:"input",props:{text:P("绑定字段")}}),J.register({label:"范围选择器",preview:()=>(0,n.Wm)(q,{placeholder:"预览输入框"},null),render:({props:e})=>(console.log("范围选择器",e),(0,n.Wm)(q,{start:e.start,end:e.end},null)),props:{start:P("开始范围"),end:P("结束范围")},key:"range"}),J.register({label:"下拉框",preview:()=>(0,n.Wm)(T.km,null,null),render:({props:e})=>{let t;return(0,n.Wm)(T.km,{modelValue:e.text,"onUpdate:modelValue":t=>e.text=t},Q(t=(e.options||[]).map(((e,t)=>(0,n.Wm)(T.BT,{label:e.label,value:e.value,key:t},null))))?t:{default:()=>[t]})},key:"select",props:{text:P("绑定字段"),options:$("下拉选项",{options:[{label:"显示值",field:"label"},{label:"绑定值",field:"value"}],key:"label"})}});const R={id:"app"};var K={__name:"App",setup(e){const t=(0,a.iH)(X);(0,n.JJ)("config",J);const o=(0,a.iH)({username:"nb",password:123,start:1,end:100});return(e,l)=>((0,n.wg)(),(0,n.iD)("div",R,[(0,n.Wm)((0,a.SU)(F),{modelValue:(0,a.SU)(t),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,a.dq)(t)?t.value=e:null),formData:(0,a.SU)(o)},null,8,["modelValue","formData"])]))}};const G=K;var ee=G;o(2834);(0,l.ri)(ee).mount("#app")}},t={};function o(l){var n=t[l];if(void 0!==n)return n.exports;var a=t[l]={exports:{}};return e[l].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,l,n,a){if(!l){var r=1/0;for(c=0;c<e.length;c++){l=e[c][0],n=e[c][1],a=e[c][2];for(var u=!0,i=0;i<l.length;i++)(!1&a||r>=a)&&Object.keys(o.O).every((function(e){return o.O[e](l[i])}))?l.splice(i--,1):(u=!1,a<r&&(r=a));if(u){e.splice(c--,1);var s=n();void 0!==s&&(t=s)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[l,n,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var l in t)o.o(t,l)&&!o.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,l){var n,a,r=l[0],u=l[1],i=l[2],s=0;if(r.some((function(t){return 0!==e[t]}))){for(n in u)o.o(u,n)&&(o.m[n]=u[n]);if(i)var c=i(o)}for(t&&t(l);s<r.length;s++)a=r[s],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(c)},l=self["webpackChunklowcode"]=self["webpackChunklowcode"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=o.O(void 0,[998],(function(){return o(3346)}));l=o.O(l)})();
//# sourceMappingURL=app.3cacf880.js.map